/**
 * Template for robot driving lab exercises.
 * This template just periodically switches between a
 * STOPPED and a DRIVING mode, updating the LCD display
 * on each change of mode.
 */
 target C {
  platform: "RP2040",
  threading: false,
  files: ["../../lib/"],
  cmake-include: ["../../platform/robot_lib.txt"],
}
import Motors from "../lib/Motors.lf"

main reactor {
  timer t(0, 2s)
  state forward:bool = true
  motors = new Motors()
  reaction(t) -> motors.left_pwr, motors.right_pwr {=
    float speed = 0.1f;
    if (!self->forward) speed = -0.1f;
    self->forward != self->forward;
    lf_set(motors.left_pwr, speed);
    lf_set(motors.right_pwr, speed);
  =}
}