target C {
  platform: "RP2040",
  threading: false
}

preamble {=
  #include <pico/stdlib.h>
  #include <hardware/gpio.h>
=}

main reactor {
  preamble {=
    const uint LED_PIN = PICO_DEFAULT_LED_PIN;
  =}
  timer t(0, 100 msec);
  state led_on:bool = false;

  reaction(startup) {=
    gpio_init(LED_PIN);
    gpio_set_dir(LED_PIN, GPIO_OUT);
  =}
  reaction(t) {=
    self->led_on = !self->led_on; 
    gpio_put(LED_PIN, self->led_on);
  =}
}
